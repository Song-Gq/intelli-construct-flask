webpackJsonp([1],{"7Otq":function(t,e,a){t.exports=a.p+"static/img/logo.ed32c5d.png"},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"margin-top":"0"},attrs:{id:"app"}},[e("el-container",[e("el-header",[e("el-row",{staticClass:"row-bg",staticStyle:{height:"100%"},attrs:{type:"flex",justify:"space-between"}},[e("el-menu",{staticClass:"el-menu-demo",staticStyle:{height:"100%"},attrs:{"default-active":this.activeIndex,mode:"horizontal"},on:{select:this.handleSelect}},[e("el-menu-item",{attrs:{index:"1"}},[this._v("Nucleic Acid Test Screenshot OCR")])],1),this._v(" "),e("el-image",{staticStyle:{height:"80%"},attrs:{src:a("7Otq"),fit:"scale-down"}})],1)],1),this._v(" "),e("el-main",[e("router-view")],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")({name:"App",data:function(){return{activeIndex:"1"}},methods:{handleSelect:function(t,e){}},mode:"history"},i,!1,function(t){a("UNnI")},null,null).exports,o=a("/ocq"),s=a("mtWM"),l=a.n(s),c={name:"Uploader",data:function(){return{fileList:[],prog:0,in_prog:!1,prog_stat:null,prog_text:"正在上传识别，请耐心等待...",tableData:[],timer:null}},methods:{handleChange:function(t,e){this.fileList=e},submitUpload:function(){var t=this;this.in_prog=!0,this.getProgress();var e=new FormData,a=1;this.fileList.forEach(function(t){e.append("id="+a.toString()+"="+t.name,t.raw),a+=1}),this.uploadFile(e).then(function(e){console.log(e),t.prog=100,t.prog_stat="success",t.prog_text="识别成功，刷新页面可重新上传",t.clearTimer();var a=e.data.res;for(var n in a)t.tableData.push({date:a[n][3],name:a[n][2],type:a[n][1],result:a[n][4]})}).catch(function(e){console.log(e),t.$message.error("上传识别失败！"),t.prog_stat="exception",t.prog_text="请刷新页面重试",t.clearTimer()})},uploadFile:function(t){return this.$axios.post("http://127.0.0.1:5000/api/recognition",t,{headers:{"Content-Type":"multipart/form-data",token:window.localStorage.getItem("token")}})},getProgress:function(){var t=this;this.timer=setInterval(function(){t.getStatus().then(function(e){t.prog=Math.round(100*e.data)}).catch(function(e){t.$message.warning("进度获取出现问题...暂不显示实时进度"),t.clearTimer()})},2e3)},getStatus:function(){return this.$axios.get("http://127.0.0.1:5000/api/getprog",{params:{proc_ID:1,headers:{token:window.localStorage.getItem("token")}}})},clearTimer:function(){clearInterval(this.timer),this.timer=null}},mode:"history",beforeDestroy:function(){clearInterval(this.timer),this.timer=null}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"30px"}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:12}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.in_prog,expression:"in_prog"}]},[t._v("\n        "+t._s(t.prog_text)+"\n        "),a("el-progress",{staticStyle:{margin:"5px auto 20px auto",width:"80%"},attrs:{percentage:t.prog,"text-inside":!0,"stroke-width":26,status:t.prog_stat}})],1),t._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"#",multiple:!0,"auto-upload":!1,"on-change":t.handleChange,"file-list":t.fileList,disabled:t.in_prog}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",disabled:t.in_prog},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",disabled:t.in_prog},on:{click:t.submitUpload}},[t._v("开始识别")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("批量上传核酸检测截图JPEG文件，每张建议不超过200KB")])],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"date",label:"日期",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"result",label:"结果"}})],1)]],2)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,p,!1,function(t){a("jFPK")},"data-v-ab0b98dc",null).exports;n.default.use(o.a);var d=new o.a({routes:[{path:"/",name:"Uploader",component:u}]}),g=a("zL8q"),h=a.n(g);a("tvR6");n.default.config.productionTip=!1,n.default.use(h.a),n.default.prototype.$axios=l.a,new n.default({el:"#app",axios:l.a,router:d,components:{App:r},template:"<App/>"})},UNnI:function(t,e){},jFPK:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.35de7728b26a221eaa19.js.map